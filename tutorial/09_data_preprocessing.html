

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>10. Data Preprocessing &mdash; LASIF 0.1.x documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="LASIF 0.1.x documentation" href="../index.html"/>
        <link rel="up" title="Tutorial" href="../tutorial.html"/>
        <link rel="next" title="11. Earth Model Handling" href="10_model_handling.html"/>
        <link rel="prev" title="9. Defining a New Iteration" href="08_a_new_iteration.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> LASIF
          

          
          </a>

          
            
            
              <div class="version">
                0.1.x
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../prerequisites.html">Installation, Testing &amp; DevInfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="00_interfaces.html">1. Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="01_creating_a_new_project.html">2. Creating a New Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_seismic_events.html">3. Seismic Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_station_data.html">4. Station Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_waveform_data.html">5. Waveform Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="05_download_helpers.html">6. Download Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_data_inspection.html">7. Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_data_validation.html">8. Data Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="08_a_new_iteration.html">9. Defining a New Iteration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">10. Data Preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_model_handling.html">11. Earth Model Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_generating_input_files.html">12. Generating Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_synthetic_waveforms.html">13. Synthetics</a></li>
<li class="toctree-l2"><a class="reference internal" href="13_misfits_and_adjoint_sources.html">14. Misfit and Adjoint Source Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_model_update.html">15. Model Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="15_next_iterations.html">16. Next Iterations</a></li>
<li class="toctree-l2"><a class="reference internal" href="16_customizing_lasif.html">17. Customizing LASIF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webinterface.html">Web Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_doc.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">LASIF</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../tutorial.html">Tutorial</a> &raquo;</li>
      
    <li>10. Data Preprocessing</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tutorial/09_data_preprocessing.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p class="centered">
<strong>Last updated on <em>August 12th 2016</em>.</strong></p><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following links shows the example project as it should be just before
step 9. You can use this to check your progress or restart the tutorial at
this very point.</p>
<p class="last"><a class="reference external" href="https://github.com/krischer/LASIF_Tutorial/tree/after_step_9_defining_a_new_iteration">After Step 9: Defining a new Iteration</a></p>
</div>
<div class="section" id="data-preprocessing">
<h1>10. Data Preprocessing<a class="headerlink" href="#data-preprocessing" title="Permalink to this headline">Â¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You do not actually need to do this for the tutorial as the proprocessed
data has already been downloaded but this will be required for real
inversions.</p>
</div>
<p>Data preprocessing is an essential step if one wants to compare data and
seismograms. It serves several purposes:</p>
<ul class="simple">
<li>Ensure a similar spectral bandwidth between observed and synthetic data to
enable a meaningful comparison.</li>
<li>Removing the instrument response and converting the data to the same units
used for the synthetics (usually <code class="docutils literal"><span class="pre">m/s</span></code>).</li>
<li>Removal of any linear trends and static offset.</li>
<li>Interpolations to sample observed and synthetic data at exactly the same
points in time.</li>
</ul>
<p>The goal of the preprocessing within <strong>LASIF</strong> is to create data that is directly
comparable to simulated data without any more processing.</p>
<p>While the raw unprocessed data are stored in a folder <code class="docutils literal"><span class="pre">{{EVENT}}/raw</span></code>, the
preprocessed data will be stored in a separate directory within each event,
identified via the name (values are valid for the tutorial):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">preprocessed_hp_0</span><span class="o">.</span><span class="mi">01000</span><span class="n">_lp_0</span><span class="o">.</span><span class="mi">02500</span><span class="n">_npts_2000_dt_0</span><span class="o">.</span><span class="mi">300000</span>
</pre></div>
</div>
<p>Or in Python terms:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">highpass</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">100.0</span>
<span class="n">lowpass</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">40.0</span>
<span class="n">npts</span> <span class="o">=</span> <span class="mi">2000</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mf">0.3</span>

<span class="n">processing_tag</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;preprocessed_hp_{highpass:.5f}_lp_{lowpass:.5f}_&quot;</span>
                  <span class="s2">&quot;npts_{npts}_dt_{dt:5f}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">highpass</span><span class="o">=</span><span class="n">highpass</span><span class="p">,</span> <span class="n">lowpass</span><span class="o">=</span><span class="n">lowpass</span><span class="p">,</span>
                                                   <span class="n">npts</span><span class="o">=</span><span class="n">npts</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="n">dt</span><span class="p">)</span>
</pre></div>
</div>
<p>If you feel that additional identifiers are needed to uniquely identify the
applied processing (in the limited setting of being useful for the here
performed waveform inversion) please contact the <strong>LASIF</strong> developers.</p>
<p>Although in principle you can use any processing tool you like, the simplest
option is probably to make use of <strong>LASIF</strong>&#8216;s built-in preprocessing. Using it
is trivial: just launch the <strong>preprocess_data</strong> command together with the
iteration name.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ lasif preprocess_data 1
</pre></div>
</div>
<p>or (this is faster as <code class="docutils literal"><span class="pre">-n</span></code> determines the number of processors it will run
on):</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mpirun -n <span class="m">4</span> lasif preprocess_data 1
</pre></div>
</div>
<p>This will start a fully parallelized preprocessing run for all data required
for the specified iteration. If you repeat the command, it will only process
data not already processed. An advantage is that you can cancel the processing
at any time and then later on just execute the command again to continue where
you left off.  This usually only needs to be done every couple of iterations
when you decide to go to higher frequencies or add new data.</p>
<p>The preprocessed data will automatically be put in the correct folder.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use any processing tool you want, but you have to adhere to the
directory structure &#8211; otherwise <strong>LASIF</strong> will not be able to work with
the data.
It is also important that the processed filenames are identical to
the unprocessed ones.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="10_model_handling.html" class="btn btn-neutral float-right" title="11. Earth Model Handling" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="08_a_new_iteration.html" class="btn btn-neutral" title="9. Defining a New Iteration" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Lion Krischer &amp; Andreas Fichtner.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.x',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>